1. Классификация моделей и методов визуализации

В настоящее время известно довольно большое число различных методов представления трехмерных объектов и связанных с ними методов визуализации, в том числе многомасштабных. Все представления можно разделить на несколько классов, обладающих характерными свойствами:

-   Поверхностные / объемные / каркасные;

-   Связанные / дискретные;

-   Явные / параметрические.

Поверхностные модели описывают только поверхность объекта в трехмерном пространстве. В противоположность им, объемные (воксельные) структуры позволяют задавать модели как часть трехмерного пространства, разбитого некоторым образом на ячейки, которые считаются заполненными, если они содержат часть объекта, и пустыми - в противном случае. Тело формируется из отдельных базовых геометрических и, возможно, конструктивно - технологических объемных элементов с помощью операций объединения, пересечения, вычитания и преобразований. При каркасном представлении, тело описывается набором ребер.

Связанные модели явно или неявно содержат информацию о непрерывных участках поверхностей моделей, тогда как дискретные представления описывают только приближение поверхности объекта.

Явное задание моделей предполагает, что описание модели объекта в данном представлении доступно в явной форме, а параметрическое - что для его получения необходимо дополнительно вычислять некоторую функцию, зависящую от параметра.

Методы визуализации можно условно разделить на проекционные методы и методы трассировки лучей.

Проекционные методы - это методы, в которых синтез изображения выполняется с помощью аффинных преобразований и преобразований проекции. Трехмерная сцена как набор примитивов визуализации (обычно, многоугольников, точек, линий и т.п.) трансформируется в двухмерный массив, который и отображается на экране монитора.

Методы трассировки лучей работают на уровне пикселей выходного изображения, рассчитывая их цвет на основе данных о геометрии сцены и положения виртуальной камеры.

Сегодня интерактивную скорость синтеза изображений предоставляют только проекционные методы, часто при поддержке аппаратного обеспечения. В дальнейшем рассматриваются только такие методы, что в свою очередь накладывает некоторые ограничения на возможные представления объектов. Характерной особенностью поставленной задачи является работа с реальными данным, т.е. данными, введенными в компьютер с помощью устройств дистанционного сканирования. Такие данные в большинстве случаев дискретны и заданы явно, обычно в виде набора точек или набора карт глубины. Кроме того, за исключением томографов (этот случай в работе не рассматривается), получающих внутреннюю структуру объекта, все сканеры работают только с поверхностью объекта. Таким образом, представление должно хорошо описывать явно заданные дискретные поверхности.

2. Полигональные сетки

Полигональные сетки являются на данный момент самым распространенным представлением, для которого создано большое количество программного обеспечения, позволяющего редактировать, передавать по сети и визуализировать модели с использованием аппаратной поддержки.

Полигональная сетка представляет собой набор вершин, ребер и плоских многоугольников. Вершины соединяются ребрами. Многоугольники рассматриваются либо как последовательность вершин или ребер. Можно предложить много способов внутреннего представления полигональных сеток.

Характерной особенностью полигональных сеток является поддержка связности модели. В силу этого полигональные представления хорошо применимы для описания большого числа синтетических поверхностей.

Однако, отсканированные данные, изначально не содержат информации о связности и непрерывности поверхностей, а представляют собой набор близко расположенных частиц (sample). Такие ограничения следуют из устройства сканирующего механизма, который обладает дискретным шагом конечного разрешения.

Следовательно, для использования полигональных моделей связность должна быть введена искусственно на этапе препроцессирования. Таким образом, полигональные модели не предназначены для прямой работы с отсканированными данными, так как требуют восстановления поверхности, что в общем случае является нетривиальной задачей и сильно зависит от класса обрабатываемых объектов. При этом восстановленная поверхность не обязательно будет использоваться на этапе визуализации (например, если модель такой сложности, что проекция треугольника на экран при типичной проекции просмотра сравнима по площади с одним пикселем).

С другой стороны, создано большое количество методов, позволяющих достаточно эффективно преобразовывать дискретные отсканированные данные в полигональные сетки. Более того, современное оборудование высокого класса позволяет выполнять преобразование в сетку аппаратно.

Гораздо сложнее обстоит ситуация с представлением больших объемов данных и поддержкой различных уровней детализации. Структура полигональных сеток линейна и они не обеспечивают «естественной» поддержки многомасштабности, поэтому работа с большими сетками затруднена и требует различных, зачастую вычислительно сложных методов упрощения. Было создано множество алгоритмов для создания многомасштабных представлений на основе сеток, имеющих непосредственное отношение к поставленной задаче.

Практически все технологии упрощения сеток используют некоторые вариации или комбинации следующих механизмов: сэмплирования (sampling), прореживания (decimation), адаптивного разбиения (adaptive subdivision) и слияния вершин (vertex merging).

Сэмплирующие алгоритмы упрощают первоначальную геометрию модели, используя либо подмножество исходных точек, либо пересечение вокселей с моделью на трехмерной сетке. Такие алгоритмы лучше всего работают на гладких поверхностях без острых углов.

Алгоритмы, использующие адаптивное разбиение находят простую базовую (base) сетку, которая затем рекурсивно разбивается для аппроксимации первоначальной модели. Такой подход работает хорошо, когда найти базовую модель относительно просто. Например, базовая модель для участка ландшафта обычно прямоугольник. Для достижения хороших результатов на произвольных моделях требуется создание базовой модели, отражающей важные свойства исходной, что может быть нетривиально.

Прореживающие алгоритмы итеративно удаляют вершины или грани из полигональной сетки, производя триангуляцию после каждого шага. Большинство из них используют только локальные изменения, что позволяет выполнять упрощение довольно быстро.

Схемы со слиянием вершин работают с помощью свертывания двух или более вершин детализированной модели в одну, которая в свою очередь может быть совмещена с другими вершинами. Слияние вершин треугольника уничтожает его, уменьшая общее число треугольников модели. Обычно алгоритмы используют сложные методы определения, какие вершины нужно слить вместе и в каком порядке. Методы, использующие слияние ребер (edge collapse), всегда сливают вершины, разделяющие одну грань. Такие методы сохраняют локальную топологию, и, кроме того, при некоторых условиях могут работать в реальном времени.

Сложность вычислений в этих методах высока и их использование не всегда оправдано при работе с дискретными данными, поскольку сложность появляется прежде всего из-за необходимости поддерживать связность модели (которая в нашем случае была искусственно введена на этапе препроцессирования). Другой причиной высокой сложности методов является линейная структура сетки, которую необходимо восстанавливать для визуализации с помощью графических API.

<span id="tth_fIg0.15" class="anchor"><span id="r10_3" class="anchor"><span id="tth_fIg0.16" class="anchor"><span id="r10_4" class="anchor"><span id="tth_fIg0.17" class="anchor"><span id="r10_5" class="anchor"></span></span></span></span></span></span>Преимущества:
+ распространенное представление
+ аппаратная поддержка
Недостатки:
- неэффективны для работы с дискретными данными из-за искусственной поддержки связности, сложного препроцессинга
- неэффективны для больших моделей из-за трудностей с организацией многомасштабности.

3. Boundary representation (B-rep) (граничное, поверхностное представление)

Поверхностное представление определяет сплошное тело неявно путем описание ограничивающей его поверхности. 
Поскольку глобальная параметризация поверхности объекта произвольной формы обычно является трудновыполнимой задачей, поверхность приближается набором **граней **(face). Обычно разбиение выполняется таким образом, чтобы каждая грань имела компактное математическое представление.
Границы граней представляется **ребрами** (edge). Также как и грани, ребра выбираются таким образом, чтобы иметь компактное математическое описание. Часть кривой, формирующей ребро, заканчивается **вершинами** (vertex). 
Поверхностная модель, которая имеет только плоские грани, называется **полигональной моделью. **Рассмотрим возможные варианты задания полигональной модели. 

<span id="Heading83" class="anchor"></span>

***3.1 Явное представление.***

В этом случае каждая грань есть полигон, состоящий из последовательности координат вершин. Объект состоит из набора граней. 

Недостатки такого представления в том, что, во-первых, взаимоотношения граней заданы неявно, а во-вторых, координаты каждой вершины появляются столько раз, сколько граней имеют эту вершину.

<span id="Heading89" class="anchor"></span>***3.2 Список вершин***
Повторяемость координат вершин можно обойти путем выделения координат вершин в отдельную структуру. В этом случае с гранями ассоциируются не координаты вершин, как в предыдущем случае, а индексы в массиве координат вершин.
Заметим, что список вершин каждой грани упорядочен по часовой стрелке, как если смотреть снаружи куба. Такое представление полезно во многих алгоритмах, таких как удаление невидимых поверхностей. Однако в таком представление остаются многие недостатки полигонального, например, задача поиска ребер, инцидентных данной вершине по-прежнему требует полного перебора. 

<span id="Heading131" class="anchor"></span>***3.3 Список ребер***

В такой модели грань представляется набором ребер и вершины грани определяются через ребра. 
Таким образом, для каждого ребра мы задаем направление. Грани также ориентированы, т.е. ребра заданы по часовой стрелке, если смотреть на куб снаружи.

<span id="Heading214" class="anchor"></span>***3.4 Winged-Edge Representation ("крылатое" представление)***
Эта модель является развитием модели, основанной на информации о ребрах.
Отличие состоит в том, что в структуру, описывающую ребра, добавляется информация о взаимном расположении граней.
Так как каждое ребро присутствует точно в двух гранях, ровно два других ребра e1 и e2 появляются после e в этих гранях. Более точно, поскольку направление обхода грани задано, e появляется один раз в положительной ориентации, а другой раз – в отрицательной.
"Крылатое представление" использует это путем ассоциации с каждым ребром двух "следующих" ребер. Они обозначаются как ncw и nccw ("next clockwise" и "next counterclockwise" ). В данном случае ncw обозначает следующее ребро в той грани, где данное ребро появляется в положительном направлении, а nccw – следующее ребро в другой грани.
Таким образом, начиная с ребра, прямо связанного с гранью, мы может получить все другие инцидентные данной вершине ребра, следуя ссылкам ncw и nccw.
В наиболее общем случае в нашу структуру включают также ссылки на предыдущие ребра в соседних гранях.
<span id="Heading237" class="anchor"></span>***3.5 Операции над граничными представлениями.***

Операции, наиболее характерные для граничного представления:

-   проверка правильности задания

-   вычисление габаритного объема

-   вычисление нормали в точке

-   вычисление кривизны поверхности

-   нахождение точки пересечения с лучом или кривой

-   определение положения точки относительно поверхности<span id="Heading249" class="anchor"></span>

**3.6 Проверка правильности задания граничного представления**

Известно соотношение, связывающее количество вершин, ребер и граней в объекте – формула Эйлера.
В наиболее простом виде, применимом для связных объектов без сквозных отверстий, она записывается так:
V – E + F = 2,
где 
V – количество вершин
E – количество ребер
F – количество граней.
Для произвольного объекта она выглядит так:
V-E+F-H=2\*(C-G),
где
H – количество отверстий (несквозных).
C – количество компонент
G – количество сквозных отверстий.
Формула Эйлера является необходимым условием правильности задания сплошного (solid) объекта.

4. NURBS

Важное значение при формировании как 2D, так и 3D моделей имеет построение элементарных кривых. Кривые строятся, в основном, следующими способами:

-   той или иной интерполяцией по точкам,

-   вычислением конических сечений,

-   расчетом пересечения поверхностей,

-   выполнением преобразования некоторой кривой,

-   формированием замкнутых или разомкнутых контуров из отдельных сегментов, например, отрезков прямых, дуг конических сечений или произвольных кривых.

В качестве последних обычно используются параметрические кубические кривые, так как это наименьшая степень при которой обеспечиваются:

-   непрерывность значения первой (второй) производной в точках сшивки сегментов кривых,

-   возможность задания неплоских кривых.

Параметрическое представление кривых выбирается по целому ряду причин, в том числе потому, что зачастую объекты могут иметь вертикальные касательные. При этом аппроксимация кривой y = f(x) аналитическими функциями была бы невозможной. Кроме того кривые, которые надо представлять, могут быть неплоскими и незамкнутыми. Наконец, параметрическое представление обеспечивает независимость представления от выбора системы координат и соответствует процессу их отображения на устройствах: позиция естественным образом определяется как две функции времени x(t) и y(t).

Существует много методов описания параметрических кубических кривых. К наиболее применяемым относятся:

-   метод Безье, широко используемый в интерактивных приложениях; в нем задаются положения конечных точек кривой, а значения первой производной задаются неявно с помощью двух других точек, обычно не лежащих на кривой;

-   метод В-сплайнов, при котором конечные точки не лежат на кривой и на концах сегментов обеспечивается непрерывность первой и второй производных.

В форме Безье кривая в общем случае задается в виде полинома Бернштейна.

При этом крайние точки управляющей ломаной и кривой совпадают, а наклоны первого и последнего звеньев ломаной совпадают с наклоном кривой в соответствующих точках.

Предложены различные быстрые схемы для вычисления кривой Безье.

Например, метод Эрмита, при котором задаются положения конечных точек кривой и значения первой производной в них.

Общее в упомянутых подходах состоит в том, что искомая кривая строится с использованием набора управляющих точек.

**4.1 Построение поверхностей**

Основные способы построения поверхностей:

-   интерполяцией по точкам,

-   перемещением образующей кривой по заданной траектории (кинематический метод),

-   деформацией исходной поверхности,

-   построением поверхности эквидистантной к исходной,

-   кинематический принцип,

-   операции добавления/удаления в структуре,

-   теоретико-множественные (булевские) операции.

Широко используется бикубические параметрические куски, с помощью которых сложная криволинейная поверхность аппроксимируется набором отдельных кусков с обеспечением непрерывности значения функции и первой (второй) производной при переходе от одного куска к другому.

Аналогично случаю с параметрическими кубическими кривыми, наиболее применимыми являются:

-   форма Безье,

-   форма В-сплайнов,

-   форма Эрмита.

NURBS – это аббревиатура Non-Uniform Rational B-Spline (неравномерный рациональный Би-сплайн), описывающая математическую основу построения кривых или сплайнов, используемых при моделировании этого типа поверхностей.

Сторонники NURBS моделирования особо отмечают качества этого вида моделирования при создании:

-   органических плавных поверхностей, таких как животные, человеческое тело или фрукты

-   индустриальных объектов, таких как автомобили, часы или тостеры

-   сглаженных поверхностей, регулируемые несколькими контрольными точками

Основой NURBS поверхности является кривая. Поверхность создается пересечением кривых. Кривые помогают вам создавать и модифицировать поверхности. Таким образом создание и редактирование кривых есть важная часть NURBS моделирования.

Сплайновое моделирование – более точное, и при масштабировании (приближении) качество объекта не меняется.

5. Воксельные модели

Классические воксельные (voxel) модели представляют собой трехмерный массив, каждому элементу которого сопоставлен цвет и коэффициент прозрачности. Такой массив задает приближение объекта с точностью, определяемой разрешением массива.

Воксельными (или объемными) методами визуализации называются методы визуализации трехмерных функций, в дискретном случае заданных, например, с помощью описанного выше массива.

Типичные методы воксельной визуализации обрабатывают массив, и формирует проекцию каждого его элемента на видовую плоскость. Исходный массив представляет собой регулярную структуру данных, что существенно используется в методах визуализации. Обычно элемент массива визуализируется на экране в виде некоторого примитива, так называемого отпечатка (footprint) или сплата (splat). Различные методы отличаются способами вычислений формы и размеров сплата.

Так как объемы данных в воксельных представлениях значительны даже для небольших моделей, единственной реальной возможностью работать со сложными объектами является использование древовидных иерархий. В работе на основе исходного массива строится многомасштабное представление в виде восьмеричного дерева. Каждый узел дерева содержит усредненное значение цвета и прозрачности всех своих потомков. Кроме того, каждый узел дерева содержит переменную, показывающую среднюю ошибку, ассоциированную с данным узлом. Эта переменная показывает ошибку, возникающую при замене оригинального набора вокселей в данной области пространства на константную функцию, равную среднему значению цвета всех потомков данного узла. В дальнейшем это значение используется для управления качеством визуализации и уровнем деталей.

Несмотря на то, что воксельные методы ориентированы в первую очередь на научную визуализацию, многие идеи, использующиеся в этих методах, находят свое применение в других областях. Например, идея сплаттинга используется при работе с точечными представлениями, а также с представлениями, основанными на изображениях.

Обобщим свойства воксельных представлений в приложении к поставленной задаче

Преимущества:
+ простая, регулярная структура;
+ аппаратная поддержка.
Недостатки:
- большой объем данных, поэтому необходимо использовать специальные многомасштабные структуры для работы со сложными объектами;
- используемые структуры данных хранят внутренние, невидимые, части объекта, тогда как для поставленной задачи достаточно описание поверхности.

6. Модели, основанные на изображениях

Моделирование и визуализация, основанные на изображениях (Image-Based Modeling and Rendering, далее IBMR) представляют собой альтернативные подход к решению задач синтеза изображения.

Такие методы не используют промежуточные структуры данных, и синтезируют итоговую картинку, основываясь на исходных данных - как правило, изображениях или изображениях с глубиной. Более формально метод визуализации, основанный на изображениях, можно определить как алгоритм, определяющий, как по конечному набору исходных (reference) изображений сцены получить новое, результирующее (resulting) изображение для заданной точки наблюдения и заданных параметров виртуальной камеры.

Структуры данных, используемые для такого алгоритма визуализации, могут сильно отличаться, неизменным остается ориентация методов на непосредственную работу с исходными данными, что делает методы IBMR концептуально близкими к поставленной задаче.

**6.1 Изображения с картами глубины**

Одной из самых простых структур данных, используемых в IBMR являются наборы изображений с картами глубины. Определим пару изображение + карта глубины как цветное изображение, которому сопоставлено полутоновое изображение соответствующего размера, интенсивность в каждой точке которого соответствует расстоянию от камеры до поверхности объекта.

Примечательным свойством представления является то, что современные дистанционные сканеры позволяют напрямую получать данные в виде карт глубины, а наиболее дорогие модели получают и цветовую информацию об объекте. Следовательно, такое представление максимально подходит для работы со сложными реальными данными, а задача состоит в разработке метода визуализации.

Следует заметить, что пара изображение + карта глубины однозначно определяет дискретное приближение поверхности в трехмерном пространстве, при этом качество приближения зависит от разрешения изображения и выбранного положения камеры.

Одна карта глубины хранит только видимую часть объекта, поэтому для восстановления полного объекта необходимо использовать набор из нескольких карт глубины, в зависимости от сложности сцены.

Было предложено достаточно много методов визуализации и использования подобных структур данных. Например, Леонардо МакМиллан использует систему обработки изображений для деформации (warping) исходного изображения с учетом исходной и результирующей (текущей) камер таким образом, чтобы результат, визуализированный на экране, создавал иллюзию трехмерности. В работе Мартина Оливейры также используется деформация изображений, однако результатом работы алгоритма являются текстуры созданные из карт глубины для текущего положения виртуальной камеры и наложенные на простую (плоскую) полигональную сетку - так называемые рельефные текстуры (relief textures).

Однако эти методы имеют серьезные недостатки. С одной стороны, в условиях недостаточной точности исходных данных и/или большом отклонении виртуальной камеры от исходной, в результирующем изображении возможно появление дырок (holes), т.е. ухудшения качества визуализации. С другой стороны, результатом работы дистанционных сканеров часто являются наборы данных из 50-70 карт глубины, которые в описанных выше алгоритмах будут обрабатывается сепаратно, создавая дополнительные погрешности визуализации.

Другим возможным вариантом является прямое восстановление трехмерных координат сэмплов (sample) и их визуализация напрямую с помощью проекции на видовую плоскость виртуальной камеры. Такой подход позволяет использовать аппаратное ускорение, так как пиксели исходных изображений в пространстве могут быть представлены точками или многоугольниками. Однако, на практике такой метод работает только для достаточно небольших наборов данных.

Главным препятствием для создания многомасштабных методов визуализации карт глубины является отсутствие четкой пространственной структуры пары изображение + карта глубины. Таким образом, использование широко распространенных многомасштабных методов работы с изображениями в данному случае значительно затруднено.

**6.2 Многослойные изображения с глубиной**

В последнее время было предпринято несколько попыток использования многомасштабных методов вместе с основанными на изображениях представлениями.

Одна из них описана в работе Чанга и Бишопа и в качестве базового представления использует многослойные изображений с глубиной (Layered Depth Images - LDI).

Многослойные изображения с глубиной хранят для каждого пикселя карты цвета все пересечения соответствующего луча с моделью. Поэтому одного многослойного изображения достаточно для описания полного объекта.

Отличие многослойных изображений с глубиной от простых заключается в том, что одно изображение позволяет хранить информацию не только о видимой с данной исходной камеры части поверхности объекта, а полную информацию об объекте. В сущности, LDI - это трехмерная структура данных, представляющая собой прямоугольную матрицу, каждым элементом которой является список точек. Каждая точка содержит глубину (расстояние до опорной плоскости) и атрибуты, в простейшем случае - цвет. Для представления всего объекта можно использовать единственное многослойное изображение, однако в предложен способ, использующий шесть перспективных LDI с единым центром проекции.

Такая структура позволяет проводить визуализацию как описанными выше методами МакМиллана и Оливейры, так и просто использовать хранимую информацию как облако точек и визуализировать его напрямую с помощью одного из графических API (например, OpenGL).

С использованием LDI-подобных структур связаны некоторые ограничения на визуализацию, обусловленные тем, что все точки в изображении ориентированы на одну базовую плоскость. Кроме того, LDI не могу быть напрямую получены с устройств ввода и для создания такой структуры необходимо использование дополнительных алгоритмов, например, деформируя изображения с глубиной по методу МакМиллана таким образом, чтобы плоскость результирующего изображения совпадала с базовой плоскостью LDI. Отметим, что процесс формирования LDI происходит до непосредственной визуализации, и поэтому его эффективность ни отражается на скорости визуализации.

Однако LDI не позволяет напрямую визуализировать объект с различными степенями детализации. Cпециалистами была предпринята попытка создать многомасштабное представление на основе LDI с использованием так называемого дерева LDI (LDI tree).

Сущность метода состоит в следующем: вместо одного LDI формируется восьмеричное дерево, в каждом узле которого находится свой LDI и ссылки на другие узлы, в которых находится LDI меньшего размера (в единицах сцены), но того же разрешения. Также для каждого узла есть ограничивающий параллелепипед.

Все LDI в дереве имеют одинаковое разрешение. Высота дерева зависит от разрешения LDI. Чем меньше разрешение LDI, тем больше высота дерева. Каждый LDI в дереве содержит информацию только о той части сцены, которая содержится в его ограничивающем параллелепипеде. Ограничивающие параллелепипеды узлов следующего уровня дерева получаются дроблением ограничивающего параллелепипеда текущего уровня на восемь равных частей

Дерево LDI позволяет решать проблему визуализации очень больших структур данных, используя следующую идею: при визуализации нет необходимости обрабатывать потомков узла, если сам узел обеспечивает достаточную степень детализации. Авторы используют следующий критерий степени детализации: считается, что LDI обеспечивает достаточный уровень детализации, если "отпечаток" (footprint, splat) его пиксела на результирующем изображении покрывает не более одного пиксела экрана.

С другой стороны, использование того же подхода позволяет дополнить данные низкого разрешения искусственно восстановленными дополнительными уровнями дерева, создавая эффект фильтрации получаемого изображения.

Визуализация производится с помощью обхода дерева от корня к листьям и рисования LDI методом МакМиллана. При этом обработка всех узлов дерева не требуется, и обход ветви дерева завершается на первом LDI, обеспечивающем достаточную точность.

Алгоритм имеет высокое качество визуализации, возможность прогрессивной передачи данных. Однако его эффективность, как по времени, так и по памяти, достаточно низкая.

Обобщим свойства основанных на изображениях представлений в приложении к поставленной задаче.

Преимущества:
+ ориентация на проблемную область;
+ легкость получения и моделирования;
Недостатки:
- сложные, не всегда качественные методы визуализации;
- трудности с поддержкой многомасштабности;
- работа только с диффузными поверхностями.

7. Точечные представления

Классические представления, основанные на изображениях, направлены на использование изображений в качестве примитивов визуализации. Повышение эффективности визуализации достигается за счет того, что время визуализации в них пропорционально не сложности геометрии, как в традиционных системах, основанных на полигональных сетках, а числу пикселей в исходных изображениях. Хотя такие подходы довольно хорошо работают для визуализации сложных объектов, они, как правило, требует значительных объемов памяти, визуализация страдает от появления артефактов в результирующем изображении, а также от невозможности работы с динамическим освещением. Кроме того, на сегодня не разработано эффективных многомасштабных алгоритмов.

Класс точечных (point sample) алгоритмов и представлений компенсируют недостатки IBМR при частичном сохранении описанных выше преимуществ.

Объекты моделируется как плотный набор точек поверхности, которые восстанавливаются из исходных изображений и сохраняются вместе с цветом, глубиной и информацией о нормали, делая возможным использование Z-буфера для удаления невидимых поверхностей, затенение по Фонгу, и другие эффекты, например, тени.

Метод визуализации таких данных напоминает классические методы деформаций (warping), но с тем различием, что точки содержат дополнительную информацию о геометрии, и они видонезависимы (view independent), т.е. цвет точки не зависит от направления, с которого она была восстановлена. Подобный подход использовался, например в для реалистичной визуализации деревьев.

Основной проблемой визуализации моделей в таких представлениях является восстановление непрерывных поверхностей, т.е. гарантия отсутствия дырок после того, как положение каждой точки будет приведено к оконным координатам. Одним из возможных практических решений является сплаттинг (splatting), т.е. вычисление формы «отпечатка» точки на плоскости экрана. Сплаттинг также часто используется в методах, основанных на изображениях. Возможны также другие подходы, например комбинация ресэмплинга и иерархического z-буфера, недостатками которых является недостаточное использование современных аппаратных ускорителей.

Главным недостатком точечных представлений, как и многих других, является сложность с представлением больших объемов данных. Использование неструктурированного набора точек позволяет достичь определенной гибкости при визуализации, но при увеличении объема на первый план выходят методы видозависимого упрощения, использовать которые в реальном времени не представляется возможным без введения дополнительных структур данных.

Обобщим свойства основанных на изображениях представлений в приложении к поставленной задаче.

Преимущества:
+ ориентация на проблемную область;
+ легкость получения и моделирования;
+ значительная гибкость в методах визуализации
Недостатки:
- трудности с поддержкой многомасштабности;
- некачественная или медленная визуализация.

8. Иерархические представления

Как правило, иерархические представления строятся на базе одного из представлений, рассмотренных выше. В подавляющем большинстве работ для построения иерархий используются древовидные структуры, например, восьмеричные деревья, или kd-деревья. Также используются общие виды трехмерных деревьев на основе иерархий описывающих сфер и кубов. Свойства иерархий могут сильно различаться в зависимости от базового представления, однако общие принципы построения и визуализации иерархических структур сходны между собой.

Нижний уровень дерева, т.е. совокупность листовых вершин, представляет собой максимально детализированную модель. Далее, поднимаясь к корню, атрибуты усредняются, структура упрощается до вырождения в один примитив на вершине дерева. Визуализация, наоборот, производится с помощью рекурсивного обхода дерева от вершины к листьям.

Иерархические структуры на базе полигональных сеток используются для динамического контроля за уровнем детализации и сложностью модели. В методе слияния вершин с узлом дерева ассоциирована вершина сетки, и переход к вышестоящему узлу дерева осуществляется с помощью слияния вершин. Воксельные иерархические модели используют восьмеричные деревья, так они наилучшим образом подходят для регулярной объемной структуры данных.

Преимущества:
+ естественная поддержка многомасштабности;
+ возможность прогрессивной обработки и передачи по сети;
+ возможность динамического контроля над уровнем детализации.
Недостатки:
- необходимость в предварительной обработке, или преобразовании из другого представления;
- в общем случае большая стоимость обработки примитива, чем в линейных представлениях;
- часто увеличение объема из-за необходимости поддержки многомасштабности (для хранения указателей и т.п.)
